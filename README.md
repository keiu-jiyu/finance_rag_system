# ğŸ“š README.md - é‡‘èå®¢æœRAGç³»ç»Ÿ

```markdown
# ğŸ’° é‡‘èå®¢æœRAGç³»ç»Ÿ

ä¸€ä¸ªåŸºäº**æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)** çš„æ™ºèƒ½é‡‘èå®¢æœç³»ç»Ÿï¼Œä½¿ç”¨**é˜¿é‡Œäº‘é€šä¹‰åƒé—®**å’Œ**å¼€æºæ¨¡å‹**å®ç°ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ” **äº”å±‚çº§è”æ£€ç´¢**ï¼šQueryåº“ â†’ QAåº“ â†’ Docåº“ â†’ BM25 â†’ è¯­ä¹‰æœç´¢
- ğŸ§  **å¤šç§Embeddingæ¨¡å‹**ï¼šæ”¯æŒsentence-transformerså’Œå¤šè¯­è¨€æ¨¡å‹
- ğŸ“Š **å‘é‡æ•°æ®åº“**ï¼šChromaæœ¬åœ°å­˜å‚¨ï¼Œæ”¯æŒå¿«é€Ÿæ£€ç´¢
- ğŸ¤– **é˜¿é‡Œäº‘é€šä¹‰åƒé—®**ï¼šå¯é€‰çš„LLMæ¨¡å‹
- ğŸ”„ **æ··åˆæ£€ç´¢**ï¼šç»“åˆå…³é”®è¯å’Œè¯­ä¹‰ç†è§£
- ğŸ’¾ **çŸ¥è¯†åº“ç®¡ç†**ï¼šæ”¯æŒä¸Šä¼ æ–‡æ¡£ã€ç®¡ç†FAQ
- ğŸŒ **Webç•Œé¢**ï¼šFlask + Bootstrapå‹å¥½UI
- ğŸ“ˆ **æ£€ç´¢åé¦ˆ**ï¼šè®°å½•ç”¨æˆ·æ»¡æ„åº¦ï¼ŒæŒç»­ä¼˜åŒ–

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ ç¯å¢ƒè¦æ±‚

```bash
Python 3.10+
Windows / macOS / Linux
```

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```env
# é˜¿é‡Œäº‘é…ç½®ï¼ˆå¯é€‰ï¼‰
DASHSCOPE_API_KEY=your_api_key_here

# Embeddingæ¨¡å‹é€‰æ‹©
EMBEDDING_MODEL=sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2

# æ£€ç´¢å‚æ•°
TOP_K=5
SIMILARITY_THRESHOLD=0.5

# Flaské…ç½®
FLASK_ENV=development
FLASK_DEBUG=True
```

### 4ï¸âƒ£ è¿è¡Œç³»ç»Ÿ

```bash
python app.py
```

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://localhost:5000`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
finance_rag_system11/
â”œâ”€â”€ modules/                        # æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ bm25_retriever.py          # BM25æ£€ç´¢
â”‚   â”œâ”€â”€ embedding_model.py         # Embeddingæ¨¡å‹
â”‚   â”œâ”€â”€ knowledge_builder.py       # çŸ¥è¯†åº“æ„å»º
â”‚   â”œâ”€â”€ knowledge_builder.bak      # å¤‡ä»½
â”‚   â”œâ”€â”€ llm_service.py             # LLMæœåŠ¡
â”‚   â”œâ”€â”€ retriever.py               # æ£€ç´¢å™¨
â”‚   â””â”€â”€ vector_db.py               # å‘é‡æ•°æ®åº“
â”œâ”€â”€ static/                         # é™æ€èµ„æº
â”‚   â””â”€â”€ css/
â”‚       â”œâ”€â”€ style.css              # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ style.css.bak          # æ ·å¼å¤‡ä»½
â”œâ”€â”€ templates/                      # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html                  # åŸºç¡€æ¨¡æ¿
â”‚   â”œâ”€â”€ chat.html                  # å¯¹è¯é¡µé¢
â”‚   â””â”€â”€ upload.html                # ä¸Šä¼ é¡µé¢
â”œâ”€â”€ data/                           # æ•°æ®ç›®å½•
â”‚   â””â”€â”€ chroma_db/                 # Chromaå‘é‡åº“
â”œâ”€â”€ models/                         # æ¨¡å‹å­˜å‚¨ç›®å½•
â”œâ”€â”€ uploads/                        # ä¸Šä¼ æ–‡ä»¶ç›®å½•
â”œâ”€â”€ venv/                           # è™šæ‹Ÿç¯å¢ƒ
â”œâ”€â”€ .env                            # ç¯å¢ƒå˜é‡
â”œâ”€â”€ app.py                          # Flaskä¸»ç¨‹åº â­
â”œâ”€â”€ requirements.txt                # ä¾èµ–åˆ—è¡¨
â””â”€â”€ README.md                       # é¡¹ç›®è¯´æ˜
```

---

## ğŸ”§ ä½¿ç”¨è¯´æ˜

### Webç•Œé¢åŠŸèƒ½

#### 1. ğŸ“ å¯¹è¯é¡µé¢
- è¾“å…¥é—®é¢˜ï¼Œç³»ç»Ÿè¿”å›ç­”æ¡ˆ
- æ˜¾ç¤ºå¼•ç”¨çš„çŸ¥è¯†åº“æ–‡æ¡£
- è®°å½•å¯¹è¯å†å²

#### 2. ğŸ“š çŸ¥è¯†åº“ç®¡ç†
- ä¸Šä¼ PDF/TXTæ–‡æ¡£
- ç®¡ç†FAQæ•°æ®
- æŸ¥çœ‹å·²æœ‰çŸ¥è¯†åº“

#### 3. âš™ï¸ ç³»ç»Ÿè®¾ç½®
- è°ƒæ•´æ£€ç´¢å‚æ•°
- åˆ‡æ¢Embeddingæ¨¡å‹
- é…ç½®LLMå‚æ•°

---

## ğŸ” æ£€ç´¢æµç¨‹

```
ç”¨æˆ·æé—®
    â†“
Queryåº“æ£€ç´¢ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰
    â†“
QAåº“æ£€ç´¢ï¼ˆé—®ç­”å¯¹åŒ¹é…ï¼‰
    â†“
Docåº“æ£€ç´¢ï¼ˆæ–‡æ¡£æ®µè½åŒ¹é…ï¼‰
    â†“
BM25å…³é”®è¯æ£€ç´¢
    â†“
è¯­ä¹‰ç›¸ä¼¼åº¦æ£€ç´¢
    â†“
èåˆæ’åº
    â†“
LLMç”Ÿæˆç­”æ¡ˆ
    â†“
è¿”å›ç»“æœ + å¼•ç”¨æ¥æº
```

---

## ğŸ“Š æ•°æ®åº“ç»“æ„

### Queryåº“
```json
{
  "id": "q_001",
  "query": "è‚¡ç¥¨å¦‚ä½•å¼€æˆ·ï¼Ÿ",
  "category": "å¼€æˆ·æŒ‡å—",
  "priority": 1
}
```

### QAåº“
```json
{
  "id": "qa_001",
  "question": "è‚¡ç¥¨å¼€æˆ·éœ€è¦ä»€ä¹ˆæ¡ä»¶ï¼Ÿ",
  "answer": "éœ€è¦18å²ä»¥ä¸Šï¼Œå‡†å¤‡èº«ä»½è¯...",
  "category": "å¼€æˆ·æŒ‡å—",
  "tags": ["å¼€æˆ·", "è‚¡ç¥¨"]
}
```

### Docåº“
```json
{
  "id": "doc_001",
  "content": "è‚¡ç¥¨å¼€æˆ·æ˜¯æŒ‡...",
  "source": "å¼€æˆ·æŒ‡å—.pdf",
  "category": "æ•™ç¨‹",
  "metadata": {"page": 1}
}
```

---

## ğŸ¤– æ”¯æŒçš„æ¨¡å‹

### Embeddingæ¨¡å‹
- `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2` ï¼ˆæ¨èï¼‰
- `sentence-transformers/all-MiniLM-L6-v2` ï¼ˆå¿«é€Ÿï¼‰
- `sentence-transformers/all-mpnet-base-v2` ï¼ˆç²¾å‡†ï¼‰

### LLMæ¨¡å‹
- **é˜¿é‡Œäº‘é€šä¹‰åƒé—®**ï¼ˆéœ€è¦API Keyï¼‰
- **æœ¬åœ°å¼€æºæ¨¡å‹**ï¼šLlamaã€Qwenç­‰ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“ˆ æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| æ£€ç´¢å»¶è¿Ÿ | <100ms |
| å‡†ç¡®ç‡ | 85%+ |
| æ”¯æŒçŸ¥è¯†åº“å¤§å° | 100K+ æ¡ç›® |
| å¹¶å‘ç”¨æˆ· | 10+ |

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: æ¨¡å‹ä¸‹è½½å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ
A: ä¿®æ”¹ `.env` ä¸­çš„ `EMBEDDING_MODEL` ä¸ºæ›´å°çš„æ¨¡å‹ï¼š
```env
EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
```

### Q2: å¦‚ä½•å¯¼å…¥è‡ªå·±çš„çŸ¥è¯†åº“ï¼Ÿ
A: åœ¨Webç•Œé¢çš„"çŸ¥è¯†åº“ç®¡ç†"é¡µé¢ä¸Šä¼ PDFæˆ–TXTæ–‡ä»¶

### Q3: æ”¯æŒç¦»çº¿è¿è¡Œå—ï¼Ÿ
A: æ”¯æŒï¼æ¨¡å‹ä¸‹è½½åå¯å®Œå…¨ç¦»çº¿è¿è¡Œï¼ˆä¸éœ€è¦API Keyï¼‰

### Q4: å¦‚ä½•æé«˜æ£€ç´¢å‡†ç¡®ç‡ï¼Ÿ
A: 
- å¢åŠ çŸ¥è¯†åº“æ–‡æ¡£è´¨é‡
- è°ƒæ•´ `TOP_K` å‚æ•°
- ä¼˜åŒ– `SIMILARITY_THRESHOLD` é˜ˆå€¼

---

## ğŸš€ è¿›é˜¶åŠŸèƒ½

```bash
# 1. æ‰¹é‡å¯¼å…¥çŸ¥è¯†åº“
python scripts/import_kb.py --file knowledge_base.csv

# 2. è¯„ä¼°æ£€ç´¢æ•ˆæœ
python scripts/evaluate.py

# 3. æ¨¡å‹å¾®è°ƒ
python scripts/fine_tune.py --model embedding_model --data training_data.json

# 4. æ€§èƒ½ä¼˜åŒ–
python scripts/optimize_db.py
```

---

## ğŸ“ è®¸å¯è¯

MIT License

---

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---
